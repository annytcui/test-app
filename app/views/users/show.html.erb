<% provide(:title, full_name(@user)) %>

<div class="flash-message">
  <%= render 'shared/flash' %>
</div>
<div class="user-container row">
  <aside class="my-profile col-4">
    <%= image_tag "default.png" %>
    <h6 class="font-weight-heavy"><%= full_name(@user) %></h6>
    <% if current_user.admin? && !current_user?(@user) %>
      <%= link_to "delete", @user, method: :delete,
                      data: { confirm: "You sure?" } %>
    <% end %>
  </aside>

  <div class="my-content col-8">
    <div class="nav-container">
      <ul class="nav user-nav">
        <li class="nav-item tablinks" onclick="openContent(event, 'profileform')">
          <button class="btn btn-link nav-link">Profile</button>
        </li>
        <li class="nav-item tablinks" onclick="openContent(event, 'timelineform')">
          <button class="btn btn-link nav-link">Timeline</button>
        </li>
        <li class="nav-item tablinks" onclick="openContent(event, 'blogsform')">
          <button class="btn btn-link nav-link">Blogs</button>
        </li>
        <li class="nav-item tablinks" onclick="openContent(event, 'followersform')">
          <button class="btn btn-link nav-link">Followers</button>
        </li>
        <li class="nav-item tablinks" onclick="openContent(event, 'followingform')">
          <button class="btn btn-link nav-link">Following</button>
        </li>
      </ul>
    </div>

    <div class="user-forms">

      <div id="profileform" class="displayforms">
        <%= bootstrap_form_for(@user, url: user_path(@user), method: :patch, html: { class: 'profile-form' }) do |f| %>
          <div class="row">
            <%= f.label "First name", class: "col" %>
            <%= f.text_field :firstname, hide_label: true, class: "col" %>
          </div>
          <div class="row">
            <%= f.label "Last name", class: "col" %>
            <%= f.text_field :lastname, hide_label: true, class: "col" %>
          </div>
          <div class="row">
            <%= f.label "Gender", class: "col" %>
            <%= f.select :gender, User.genders.keys, hide_label: true, class: "col" %>
          </div>
          <div class="row">
            <%= f.label "Birthday", class: "col" %>
            <%= f.date_select :birthday, hide_label: true, class: "col" %>
          </div>
          <%= f.submit "Save", class: "btn btn-primary" %>
        <% end %>
      </div>

      <div id="timelineform" class="displayforms">
        <h3>London</h3>
        <p>London is the capital city of England.</p>
      </div>

      <div id="blogsform" class="displayforms">
        <h3>Paris</h3>
        <p>Paris is the capital of France.</p>
      </div>

      <div id="followersform" class="displayforms">
        <h3>Tokyo</h3>
        <p>Tokyo is the capital of Japan.</p>
      </div>

      <div id="followingform" class="displayforms">
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
function openContent(event, contentName) {
  // Declare all variables
  var i, tabcontent, tablinks;

  // Get all the elements with class="display-forms" and hide them
  tabcontent = document.getElementsByClassName("displayforms")
  for (i = 0; i < tabcontent.length; i++) {
    tabcontent[i].style.display = "none";
  }

  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace(" active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab
  document.getElementById(contentName).style.display = "block";
  event.currentTarget.className += " active";
}
</script>
